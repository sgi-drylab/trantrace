webpackJsonp([4],{"6o16":function(t,e,a){var r=a("VU/8")(a("Mhyg"),a("Gk6X"),!1,function(t){a("uotM")},"data-v-2282a8c2",null);t.exports=r.exports},Gk6X:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"onTransTaskMain"}},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},["/ontrans"===t.$route.path?a("el-breadcrumb-item",{attrs:{to:t.backUrl}},[t._v("Translation")]):t._e(),t._v(" "),"/retrans"===t.$route.path?a("el-breadcrumb-item",{attrs:{to:t.backUrl}},[t._v("Retranslation")]):t._e(),t._v(" "),"/ontrans"===t.$route.path?a("el-breadcrumb-item",[t._v("Translate")]):t._e(),t._v(" "),"/retrans"===t.$route.path?a("el-breadcrumb-item",[t._v("Retranslate")]):t._e()],1),t._v(" "),a("div",{attrs:{id:"onTransCon"}},[a("div",[a("el-tag",{attrs:{type:"info"}},[t._v("Project Name: "+t._s(t.currentItem.product))]),t._v(" "),a("el-tag",{attrs:{type:"info"}},[t._v("Priority:\n        "),"1"==t.currentItem.priority?a("span",[t._v("Low")]):t._e(),t._v(" "),"2"==t.currentItem.priority?a("span",[t._v("Normal")]):t._e(),t._v(" "),"3"==t.currentItem.priority?a("span",{staticStyle:{color:"red"}},[t._v("High")]):t._e()]),t._v(" "),a("el-tag",{attrs:{type:"info"}},[t._v("Language: "+t._s(t.currentItem.lang))]),t._v(" "),a("el-tag",{attrs:{type:"info"}},[t._v("Owner: "+t._s(t.currentItem.allocate_users_name))]),t._v(" "),a("el-tag",{attrs:{type:"info"}},[t._v("Deadline: "+t._s(t.currentItem.deadline&&t.currentItem.deadline.split(" ")[1]?t.currentItem.deadline.split(" ")[0]:t.currentItem.deadline))]),t._v(" "),"Untranslated"===t.currentItem.status||"Unretranslated"===t.currentItem.status?a("el-button",{attrs:{type:"success",size:"small",id:"submitBtn"},on:{click:t.submit}},[t._v("Submit")]):t._e(),t._v(" "),"/retrans"===t.$route.path?a("div",[a("el-alert",{attrs:{title:"Latest failed reason: "+t.currentItem.approve.tips,type:"warning",closable:!1}})],1):t._e()],1),t._v(" "),a("div",{attrs:{id:"transBox"}},[t._m(0),t._v(" "),a("div",{staticClass:"st_con"},[a("el-card",{staticClass:"boxCard"},[a("div",{staticClass:"rawDataText",attrs:{id:"rawDataText1",title:"click to copy content"},on:{click:t.execClick,copy:function(e){t.execCopy(e,"rawDataText1")}}},[t._v(t._s(t.currentItem.key))]),t._v(" "),a("div",{staticClass:"btnCon"},[a("el-button",{attrs:{type:"primary",size:"small",id:"googleBtn1"},on:{click:function(e){t.googleTrans(t.currentItem.key,"k")}}},[t._v("Google")])],1)]),t._v(" "),a("el-card",{staticClass:"boxCard"},[a("el-input",{staticClass:"afterDataText",attrs:{id:"afterDataText1",type:"textarea",placeholder:"enter translation"},model:{value:t.currentItem.targetKey,callback:function(e){t.$set(t.currentItem,"targetKey",e)},expression:"currentItem.targetKey"}})],1)],1),t._v(" "),t._l(JSON.parse(t.currentItem.translate),function(e,r){return a("div",{key:r,staticClass:"st_con",attrs:{name:r+2}},[a("el-card",{staticClass:"boxCard"},[a("div",{staticClass:"rawDataText",attrs:{id:"rawDataText"+(r+2),title:"click to copy content"},on:{click:t.execClick,copy:function(e){t.execCopy(e,"rawDataText"+(r+2))}}},[t._v(t._s(e))]),t._v(" "),a("div",{staticClass:"btnCon"},[a("el-button",{attrs:{type:"primary",size:"small",id:"googleBtn"+(r+2)},on:{click:function(a){t.googleTrans(e,r)}}},[t._v("Google")])],1)]),t._v(" "),a("el-card",{staticClass:"boxCard"},[a("el-input",{staticClass:"afterDataText",attrs:{id:"afterDataText"+(r+2),type:"textarea",placeholder:"enter translation"},model:{value:t.currentItem.target[r],callback:function(e){t.$set(t.currentItem.target,r,e)},expression:"currentItem.target[index]"}})],1)],1)})],2)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"boxTitleCon"},[e("p",[this._v("Source")]),this._v(" "),e("p",[this._v("Translation")])])}]}},Mhyg:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={mounted:function(){var t=this,e={};this.$route.query.name&&(e.name=this.$route.query.name),this.$route.query.key&&(e.key=this.$route.query.key),this.$route.query.priority&&(e.priority=this.$route.query.priority),this.$route.query.deadline&&(e.deadline=this.$route.query.deadline),this.$route.query.page&&(e.page=this.$route.query.page),"/ontrans"===this.$route.path&&(this.backUrl={path:"/translation",query:e}),"/retrans"===this.$route.path&&(this.backUrl={path:"/retranslation",query:e}),this.$http.post("/api/translate/translate_list",qs.stringify({id:this.$route.query.id,status:this.status})).then(function(e){"Untranslated"===t.status&&(e.data.result.data.forEach(function(e){t.$set(e,"target",[]),t.$set(e,"targetKey","")}),JSON.parse(e.data.result.data[0].translate).forEach(function(t){e.data.result.data[0].target.push("")})),"Unretranslated"===t.status&&e.data.result.data.forEach(function(e){t.$set(e,"target",[]),JSON.parse(e.approve.translate).forEach(function(t,a){e.target.push(t[JSON.parse(e.translate)[a]])}),t.$set(e,"targetKey",JSON.parse(e.approve.key)[0][e.key])}),t.currentItem=e.data.result.data[0]})},data:function(){return{backUrl:"",copyFlag:!1,currentItem:{translate:"[]",approve:{key:"[]",translate:"[]"}}}},computed:{status:function(){return"/ontrans"===this.$route.path?"Untranslated":"/retrans"===this.$route.path?"Unretranslated":null}},watch:{"currentItem.target":{handler:function(t,e){},deep:!0}},methods:{googleTrans:function(t,e){var a=this;if(t.includes("%")&&!this.copyFlag)this.$message.warning("Please copy the text manually, since Google Translate site won't accept URLs with special characters.");else{var r=void 0,s=void 0;t.trim()&&("k"===e?(r=t.trim(),s=$("#googleBtn1")):(r=t.trim(),s=$("#googleBtn"+(e+2)))),s.html("Opening..");var n=void 0,i=void 0;this.$http.post("/api/product/lang_list",qs.stringify({sl:this.currentItem.lang.split(" -> ")[0],tl:this.currentItem.lang.split(" -> ")[1]})).then(function(t){n=t.data.result.sl_code,i=t.data.result.tl_code}),setTimeout(function(){s.html("Google"),window.open("https://translate.google.cn/#view=home&op=translate&sl="+n+"&tl="+i+"&text="+encodeURIComponent(r)),a.copyFlag=!1},500)}},execClick:function(){document.execCommand("copy")},execCopy:function(t,e){var a=document.getElementById(e).textContent;this.isIE()?window.clipboardData?(window.clipboardData.setData("Text",a),this.copyFlag=!0,this.$message.success("Successful copy!")):(this.copyFlag=!0,this.$message.error("Please copy the content manually.")):(t.preventDefault(),t.clipboardData?(t.clipboardData.setData("text/plain",a),this.copyFlag=!0,this.$message.success("Successful copy!")):(this.copyFlag=!0,this.$message.error("Please copy the content manually.")))},isIE:function(){var t=window.document.createElement("input");return void 0===window.ActiveXObject?null:window.XMLHttpRequest?window.document.querySelector?window.document.addEventListener?window.atob?t.dataset?11:10:9:8:7:6},submit:function(){var t=this,e=!1,a=!1;if(this.currentItem.target.forEach(function(t){(!t||!t.trim())&&(e=!0)}),!this.currentItem.targetKey.trim()&&(a=!0),e||a)return this.$message({message:"All fields must be translated before submission.",type:"warning"}),!1;var r={};r.translate_job_id=this.$route.query.id;var s={};s[this.currentItem.key]=this.currentItem.targetKey,r.key_translation=JSON.stringify([s]);var n=[];JSON.parse(this.currentItem.translate).forEach(function(e,a){var r={};r[e]=t.currentItem.target[a],n.push(r)}),r.fields_translation=JSON.stringify(n),r.status=this.currentItem.status,this.$http.post("/api/translate/translate",qs.stringify(r)).then(function(e){setTimeout(function(){"/ontrans"===t.$route.path&&(t.$store.state.taskList.Untranslated_nums-=1,t.$router.push(t.backUrl)),"/retrans"===t.$route.path&&(t.$store.state.taskList.Unretranslated_nums-=1,t.$router.push(t.backUrl))},500)})}}}},uotM:function(t,e,a){var r=a("xPNI");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("14e784c7",r,!0,{})},xPNI:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])}});