webpackJsonp([10],{"5Vny":function(t,e,r){(t.exports=r("FZ+f")(!1)).push([t.i,"",""])},QMDy:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={mounted:function(){var t=this;new Promise(function(e,r){"/t_browhistoryitem"===t.$route.path&&(t.prePath="/t_history"),"/a_browhistoryitem"===t.$route.path&&(t.prePath="/a_history"),"/v_browhistoryitem"===t.$route.path&&(t.prePath="/v_history"),"/t_browhistoryitem"===t.$route.path&&(t.url="/api/translate/history"),"/a_browhistoryitem"===t.$route.path&&(t.url="/api/approve/list"),"/v_browhistoryitem"===t.$route.path&&(t.url="/api/view/list_conflict_all");var a={};t.$route.query.name&&(a.name=t.$route.query.name),t.$route.query.key&&(a.key=t.$route.query.key),t.$route.query.status&&(a.status=t.$route.query.status),t.$route.query.page&&(a.page=t.$route.query.page),t.backUrl={path:t.prePath,query:a},e()}).then(function(e){t.$http.post(t.url,qs.stringify({id:t.$route.query.id})).then(function(e){t.currentItem=e.data.data[0],t.total=e.data.total})}),this.$http.post("/api/user/list").then(function(e){t.userList=e.data.data})},data:function(){return{userName:Base64.decode(this.$cookies.get("tname")),backUrl:"",prePath:"",url:"",currentItem:{key:"[{}]",translate:"[{}]"},dialogVisible:!1,agreeFlag:null,userList:[],translators:[],distributeForm:{translate_users_name:""},rules:{translate_users_name:[{required:!0,message:"Please select a translator."}]}}},methods:{openAgreeModal:function(t){var e=this;this.dialogVisible=!0,this.agreeFlag=t,1===t&&JSON.parse(this.currentItem.translate_users).forEach(function(t){e.userList.forEach(function(r){if(t===r.id)return e.translators.push(r),!1})})},submit:function(){var t=this;1===this.agreeFlag&&this.$refs.distributeForm.validate(function(e){if(!e)return!1;t.$http.post("/api/approve/approve_conflict",qs.stringify({id:t.$route.query.id,approved:t.agreeFlag,translate_users_name:t.distributeForm.translate_users_name})).then(function(e){setTimeout(function(){t.$store.state.taskList.Conflict_nums-=1,t.$router.push(t.backUrl)},500)})}),0===this.agreeFlag&&this.$http.post("/api/approve/approve_conflict",qs.stringify({id:this.$route.query.id,approved:this.agreeFlag,translate_users_name:""})).then(function(e){setTimeout(function(){t.$store.state.taskList.Conflict_nums-=1,t.$router.push(t.backUrl)},500)})}}}},Y5m6:function(t,e,r){var a=r("5Vny");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);r("rjj0")("7fa71712",a,!0,{})},"iqb/":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"historyItemMain"}},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},["/v_browhistoryitem"!==t.$route.path?r("el-breadcrumb-item",{attrs:{to:t.backUrl}},[t._v("History")]):r("el-breadcrumb-item",{attrs:{to:t.backUrl}},[t._v("Issues")]),t._v(" "),r("el-breadcrumb-item",[t._v("View")])],1),t._v(" "),r("div",{attrs:{id:"historyItemCon"}},[r("div",[r("el-tag",{attrs:{type:"info"}},[t._v("Project Name: "+t._s(t.currentItem.product))]),t._v(" "),r("el-tag",{attrs:{type:"info"}},[t._v("Language: "+t._s(t.currentItem.lang))]),t._v(" "),"/t_browhistoryitem"===t.$route.path||"/a_browhistoryitem"===t.$route.path?r("el-tag",{attrs:{type:"info"}},[t._v("Status:\n        "),"Qualified"===t.currentItem.status?r("span",[t._v("Passed")]):"Unretranslated"===t.currentItem.status?r("span",[t._v("Failed")]):r("span",[t._v(t._s(t.currentItem.status))])]):t._e(),t._v(" "),"/v_browhistoryitem"===t.$route.path?r("el-tag",{attrs:{type:"info"}},[t._v("Status:\n        "),2===t.currentItem.approved?r("span",[t._v("Ignored")]):t._e(),t._v(" "),1===t.currentItem.approved?r("span",[t._v("Agreed")]):t._e(),t._v(" "),0===t.currentItem.approved?r("span",[t._v("Unresolved")]):t._e()]):t._e(),t._v(" "),"/t_browhistoryitem"===t.$route.path?r("el-tag",{attrs:{type:"info"}},[t._v("Translation Time: "+t._s(t.currentItem.created_at))]):t._e(),t._v(" "),"/a_browhistoryitem"===t.$route.path?r("el-tag",{attrs:{type:"info"}},[t._v("Review Time: "+t._s(t.currentItem.updated_at))]):t._e(),t._v(" "),"/v_browhistoryitem"===t.$route.path?r("el-tag",{attrs:{type:"info"}},[t._v("Owner: "+t._s(t.currentItem.users_name))]):t._e(),t._v(" "),"/v_browhistoryitem"===t.$route.path?r("el-tag",{attrs:{type:"info"}},[t._v("Creation Time: "+t._s(t.currentItem.created_at))]):t._e(),t._v(" "),"/v_browhistoryitem"===t.$route.path&&0!==t.currentItem.approved?r("el-tag",{attrs:{type:"info"}},[t._v("Reply Time: "+t._s(t.currentItem.advice_updated_at))]):t._e(),t._v(" "),"/v_browhistoryitem"===t.$route.path?r("el-tag",{attrs:{type:"info"}},[t._v("Version: "+t._s(t.currentItem.version_name))]):t._e(),t._v(" "),"/v_browhistoryitem"===t.$route.path?r("el-tag",{attrs:{type:"info"}},[t._v("Creator: "+t._s(t.currentItem.user_name))]):t._e(),t._v(" "),"/v_browhistoryitem"===t.$route.path&&t.currentItem.users_name===t.userName&&0===t.currentItem.approved?r("div",{staticStyle:{display:"inline-block","margin-bottom":"5px"}},[0===t.currentItem.approved?r("el-button",{attrs:{type:"success",size:"small",id:"redistributeBtn"},on:{click:function(e){t.openAgreeModal(1)}}},[t._v("Agree")]):t._e(),t._v(" "),0===t.currentItem.approved?r("el-button",{attrs:{type:"danger",size:"small",id:"ignoreBtn"},on:{click:function(e){t.openAgreeModal(0)}}},[t._v("Ignore")]):t._e()],1):t._e()],1),t._v(" "),"/t_browhistoryitem"===t.$route.path&&"Unretranslated"===t.currentItem.status?r("div",[r("el-alert",{attrs:{title:"Failed reason: "+t.currentItem.tips,type:"warning",closable:!1}})],1):t._e(),t._v(" "),"/a_browhistoryitem"===t.$route.path&&"Unretranslated"===t.currentItem.status?r("div",[r("el-alert",{attrs:{title:"Failed reason: "+t.currentItem.tips,type:"warning",closable:!1}})],1):t._e(),t._v(" "),"/v_browhistoryitem"===t.$route.path&&t.currentItem.objection?r("div",[r("el-alert",{attrs:{title:"Issue description: "+t.currentItem.objection,type:"warning",closable:!1}})],1):t._e(),t._v(" "),r("div",{attrs:{id:"historyItemBox"}},[t._m(0),t._v(" "),r("div",{staticClass:"st_con"},[r("el-card",{staticClass:"boxCard"},[r("div",{staticClass:"rawDataText",attrs:{id:"rawDataText1"}},[t._v(t._s(Object.keys(JSON.parse(t.currentItem.key)[0])[0]))])]),t._v(" "),r("el-card",{staticClass:"boxCard"},[r("div",{staticClass:"rawDataText",attrs:{id:"rawDataText1"}},[t._v(t._s(JSON.parse(t.currentItem.key)[0][Object.keys(JSON.parse(t.currentItem.key)[0])[0]]))])])],1),t._v(" "),t._l(JSON.parse(t.currentItem.translate),function(e,a){return r("div",{key:a,staticClass:"st_con",attrs:{name:a+2}},[r("el-card",{staticClass:"boxCard"},[r("div",{staticClass:"rawDataText",attrs:{id:"rawDataText"+(a+2)}},[t._v(t._s(Object.keys(e)[0]))])]),t._v(" "),r("el-card",{staticClass:"boxCard"},[r("div",{staticClass:"rawDataText",attrs:{id:"rawDataText1"}},[t._v(t._s(e[Object.keys(e)[0]]))])])],1)})],2)]),t._v(" "),r("el-dialog",{attrs:{title:1===t.agreeFlag?"Agree on Issue":"Ignore Issue",width:"35%",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[0===t.agreeFlag?r("div",{staticClass:"dialog_warning_text"},[r("i",{staticClass:"el-message__icon el-icon-warning"}),t._v(" "),r("span",[t._v("Are you sure to ignore this issue?")])]):t._e(),t._v(" "),1===t.agreeFlag?r("div",{staticClass:"dialog_warning_text"},[r("i",{staticClass:"el-message__icon el-icon-warning"}),t._v(" "),r("span",[t._v("You agree that translation is wrong and reassign it to translator.")])]):t._e(),t._v(" "),1===t.agreeFlag?r("el-form",{ref:"distributeForm",staticClass:"demo-ruleForm",attrs:{model:t.distributeForm,rules:t.rules},nativeOn:{submit:function(t){t.preventDefault()}}},[r("el-form-item",{attrs:{prop:"translate_users_name",label:"Please select a translator:"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:""},model:{value:t.distributeForm.translate_users_name,callback:function(e){t.$set(t.distributeForm,"translate_users_name",e)},expression:"distributeForm.translate_users_name"}},t._l(t.translators,function(t,e){return r("el-option",{key:e,attrs:{label:t.name,value:t.name}})}))],1)],1):t._e(),t._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("Cancel")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("Yes")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"boxTitleCon"},[e("p",[this._v("Source")]),this._v(" "),e("p",[this._v("Translation")])])}]}},"w/tR":function(t,e,r){var a=r("VU/8")(r("QMDy"),r("iqb/"),!1,function(t){r("Y5m6")},"data-v-69ca2249",null);t.exports=a.exports}});